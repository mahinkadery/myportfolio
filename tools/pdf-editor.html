<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- SEO Metadata -->
  <title>PDF Editor – Edit Text in PDF Documents Online | ToolfolioHub</title>
  <meta name="description" content="Edit text directly in PDF documents. Upload a PDF and click words to edit them inline. Download the edited PDF with all changes preserved." />
  <meta name="keywords" content="pdf editor, edit pdf, pdf text editor, edit pdf text, pdf editor online, modify pdf, toolfoliohub" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="PDF Editor – Edit Text in PDF Documents" />
  <meta property="og:description" content="Edit PDF text directly in your browser. Click words to edit them inline." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://toolfoliohub.com/tools/pdf-editor" />
  <meta property="og:image" content="https://toolfoliohub.com/og-image.jpg" />

  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <script src="../tailwind-theme.js"></script>
  <link rel="stylesheet" href="../styles.css"/>
  <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png">
  <link rel="manifest" href="/favicon_io/site.webmanifest">
  <link rel="shortcut icon" href="/favicon_io/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
  
  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <!-- PDF-Lib -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  
  <style>
    .tool-shell {
      max-width: 1200px;
      margin: 0 auto;
    }
    .page-container {
      position: relative;
      margin-bottom: 2rem;
      display: flex;
      justify-content: center;
      background: rgba(255, 255, 255, 0.5);
      padding: 1rem;
      border-radius: 0.5rem;
    }
    .canvas-wrapper {
      position: relative;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .word-layer {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
    }
    .word-layer span {
      position: absolute;
      outline: none;
      cursor: text;
      pointer-events: auto;
      background: rgba(255, 255, 0, 0.2);
      border-radius: 2px;
      padding: 1px 2px;
      transition: background 0.2s;
    }
    .word-layer span:hover {
      background: rgba(255, 255, 0, 0.4);
    }
    .word-layer span:focus {
      background: rgba(255, 255, 0, 0.6);
      outline: 1px solid #2b6cee;
    }
    #pagesContainer {
      max-height: 70vh;
      overflow-y: auto;
      padding: 1rem 0;
    }
    .pdf-loader {
      display: none;
    }
    .pdf-loader.active {
      display: block;
      text-align: center;
      padding: 2rem;
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark font-display dotted-bg">
  <div class="min-h-screen flex flex-col">
    <header class="w-full max-w-5xl mx-auto mt-6 rounded-full glass-effect px-6 py-3 flex items-center justify-between shadow-lg">
      <a href="/" class="flex items-center gap-3">
        <img src="../website-logos/headerlogoTFB.png" alt="toolfoliohub" class="h-8 w-auto dark:hidden">
        <img src="../website-logos/Toolfoliohubdarkmodelogo.png" alt="toolfoliohub" class="h-8 w-auto hidden dark:block">
        <span class="brand-title text-xs sm:text-sm">toolfoliohub</span>
      </a>
      <div class="flex items-center gap-4">
        <a href="/tools" class="text-sm font-semibold text-primary">⬅ Back to Tools</a>
        <button id="darkModeToggle" class="p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors">
          <span class="material-symbols-outlined text-text-light dark:text-text-dark">dark_mode</span>
        </button>
      </div>
    </header>

    <main class="flex-1 px-4 py-10">
      <section class="tool-shell rounded-3xl glass-effect p-8 shadow-xl space-y-6">
        <div>
          <p class="text-xs uppercase tracking-[0.4em] text-muted-light dark:text-muted-dark">PDF Suite</p>
          <h1 class="mt-2 text-3xl font-bold">PDF Editor</h1>
          <p class="mt-2 text-muted-light dark:text-muted-dark">
            Upload a PDF and edit text directly on each page. Click any word to edit it inline.
          </p>
        </div>

        <div class="space-y-4">
          <div class="space-y-2">
            <label for="pdfFile" class="block text-sm font-medium text-text-light dark:text-text-dark">
              Upload PDF File
            </label>
            <input
              id="pdfFile"
              type="file"
              accept="application/pdf"
              class="w-full rounded-2xl border border-white/40 bg-white/80 dark:border-white/10 dark:bg-background-dark/60 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-primary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/90"
            />
          </div>

          <div class="pdf-loader" id="pdfLoader">
            <p class="text-muted-light dark:text-muted-dark">Loading PDF...</p>
          </div>

          <div id="pagesContainer" class="hidden"></div>

          <div id="downloadSection" class="hidden">
            <button
              id="downloadBtn"
              class="rounded-full bg-primary text-white px-6 py-3 text-sm font-semibold hover:bg-primary/90 transition-colors"
            >
              Download Edited PDF
            </button>
          </div>
        </div>
      </section>

      <!-- SEO Article Section -->
      <article class="tool-shell rounded-3xl glass-effect p-8 md:p-12 shadow-xl prose dark:prose-invert max-w-none mb-12">
        <style>
          .prose { max-width: none; }
          .dark .prose { color: #d1d5db; }
          .dark .prose h2, .dark .prose h3, .dark .prose strong { color: #f3f4f6; }
          .dark .prose a { color: #60a5fa; }
        </style>
        
        <h2>PDF Editor – Edit Text Directly in PDF Documents</h2>
        
        <p class="lead">
          Editing PDF documents has traditionally required expensive software or complex workarounds. Most PDF tools only allow adding annotations or filling forms, not editing existing text. The <strong>PDF Editor</strong> by ToolfolioHub lets you edit text directly in PDF documents by clicking on words to modify them inline, then downloading the edited PDF with all changes preserved.
        </p>
        <p>
          Whether you're correcting typos, updating information, or modifying document content, this tool makes PDF editing accessible without expensive software.
        </p>

        <h2>How PDF Editing Works</h2>
        <p>
          This tool uses advanced PDF processing:
        </p>
        <ol>
          <li><strong>PDF Rendering:</strong> Uses PDF.js to render PDF pages as canvas images</li>
          <li><strong>Text Extraction:</strong> Extracts text items and their positions using PDF.js</li>
          <li><strong>Word Overlay:</strong> Creates editable spans positioned over each word</li>
          <li><strong>Edit in Place:</strong> Click words to edit them directly on the page</li>
          <li><strong>PDF Regeneration:</strong> Uses PDF-Lib to recreate the PDF with edited text</li>
        </ol>

        <h2>Key Features</h2>
        
        <h3>1. Direct Text Editing</h3>
        <p>
          Click any word to edit it inline. Changes appear immediately on the page preview.
        </p>

        <h3>2. Multiple Page Support</h3>
        <p>
          Edit text on any page of multi-page PDFs. All pages are displayed in a scrollable container.
        </p>

        <h3>3. Visual Feedback</h3>
        <p>
          Editable words are highlighted when hovered or focused, making it clear which text can be edited.
        </p>

        <h3>4. Browser-Based Processing</h3>
        <p>
          All editing happens in your browser:
        </p>
        <ul>
          <li>No file uploads—privacy guaranteed</li>
          <li>No server processing—instant editing</li>
          <li>No account required—just upload and edit</li>
        </ul>

        <h2>Limitations and Notes</h2>
        <ul>
          <li><strong>Text-Only Editing:</strong> Currently edits text; images and graphics are not editable</li>
          <li><strong>Formatting:</strong> Basic text editing; complex formatting may not be preserved exactly</li>
          <li><strong>Scanned PDFs:</strong> PDFs created from images (scanned documents) may not have extractable text</li>
        </ul>

        <h2>How to Use the PDF Editor</h2>
        <ol>
          <li><strong>Upload PDF:</strong> Click "Choose File" and select a PDF document</li>
          <li><strong>Wait for Loading:</strong> PDF pages render with editable word overlays</li>
          <li><strong>Edit Words:</strong> Click any word to edit it directly</li>
          <li><strong>Review Changes:</strong> Scroll through pages to verify all edits</li>
          <li><strong>Download:</strong> Click "Download Edited PDF" to save your changes</li>
        </ol>

        <h2>Common Use-Cases</h2>
        <ul>
          <li><strong>Correct Typos:</strong> Fix spelling errors and typos in PDFs</li>
          <li><strong>Update Information:</strong> Change dates, names, or other details</li>
          <li><strong>Modify Content:</strong> Edit descriptions, instructions, or text</li>
          <li><strong>Quick Corrections:</strong> Make minor edits without recreating documents</li>
        </ul>

        <h2>Conclusion</h2>
        <p>
          The <strong>PDF Editor</strong> makes PDF text editing accessible with an intuitive click-to-edit interface. By combining PDF.js for rendering and PDF-Lib for regeneration, it provides a powerful editing tool that works entirely in your browser.
        </p>
      </article>
    </main>
  </div>

  <script>
    // Set PDF.js worker
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }

    let originalPdfBytes = null;
    let wordsByPage = []; // Array of Word[] for each page
    let pdfDocument = null;
    let pagesInfo = []; // Store page dimensions

    // Word interface
    class Word {
      constructor(id, pageIndex, text, x, y, fontSize, width, height) {
        this.id = id;
        this.pageIndex = pageIndex;
        this.text = text;
        this.x = x;
        this.y = y;
        this.fontSize = fontSize;
        this.width = width;
        this.height = height;
      }
    }

    document.getElementById('pdfFile').addEventListener('change', async (event) => {
      const file = event.target.files[0];
      if (!file) return;

      const loader = document.getElementById('pdfLoader');
      const container = document.getElementById('pagesContainer');
      const downloadSection = document.getElementById('downloadSection');

      loader.classList.add('active');
      container.classList.add('hidden');
      downloadSection.classList.add('hidden');
      container.innerHTML = '';
      wordsByPage = [];
      pagesInfo = [];

      try {
        // Read file as ArrayBuffer
        const arrayBuffer = await file.arrayBuffer();
        originalPdfBytes = new Uint8Array(arrayBuffer);

        // Load PDF with PDF.js
        const loadingTask = pdfjsLib.getDocument({ data: originalPdfBytes });
        pdfDocument = await loadingTask.promise;

        loader.classList.remove('active');
        container.classList.remove('hidden');
        downloadSection.classList.remove('hidden');

        // Render each page
        for (let pageNum = 1; pageNum <= pdfDocument.numPages; pageNum++) {
          await renderPage(pageNum);
        }
      } catch (error) {
        console.error('Error loading PDF:', error);
        loader.innerHTML = '<p class="text-red-600 dark:text-red-400">Error loading PDF. Please try another file.</p>';
      }
    });

    async function renderPage(pageNum) {
      const page = await pdfDocument.getPage(pageNum);
      const viewport = page.getViewport({ scale: 1.5 });

      // Create page container
      const pageContainer = document.createElement('div');
      pageContainer.className = 'page-container';
      pageContainer.id = `page-${pageNum}`;

      // Create canvas wrapper
      const canvasWrapper = document.createElement('div');
      canvasWrapper.className = 'canvas-wrapper';
      
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      canvas.height = viewport.height;
      canvas.width = viewport.width;

      // Render PDF page to canvas
      await page.render({
        canvasContext: context,
        viewport: viewport
      }).promise;

      // Store page info
      const pageInfo = {
        width: viewport.width,
        height: viewport.height,
        pageNum: pageNum
      };
      pagesInfo.push(pageInfo);

      // Get text content
      const textContent = await page.getTextContent();
      
      // Extract words with positions
      const words = extractWords(textContent.items, pageNum - 1, viewport);
      wordsByPage.push(words);

      // Create word layer
      const wordLayer = document.createElement('div');
      wordLayer.className = 'word-layer';
      wordLayer.style.width = `${viewport.width}px`;
      wordLayer.style.height = `${viewport.height}px`;

        // Create editable spans for each word
        words.forEach(word => {
          const span = document.createElement('span');
          span.contentEditable = true;
          span.textContent = word.text;
          span.style.position = 'absolute';
          span.style.left = `${word.x}px`;
          span.style.top = `${word.y}px`;
          span.style.fontSize = `${word.fontSize}px`;
          span.style.lineHeight = '1';
          span.style.minWidth = `${Math.max(word.width, 20)}px`;
          span.style.fontFamily = 'Arial, sans-serif';
          span.style.color = 'rgba(0, 0, 0, 0.01)'; // Nearly invisible but selectable
          span.style.outline = 'none';
          span.dataset.wordId = word.id;

          // Update word on blur
          span.addEventListener('blur', (e) => {
            const wordId = e.target.dataset.wordId;
            const pageWords = wordsByPage[word.pageIndex];
            const wordObj = pageWords.find(w => w.id === wordId);
            if (wordObj) {
              const newText = e.target.textContent.trim();
              wordObj.text = newText || ' ';
              // Update display if empty
              if (!newText) {
                e.target.textContent = ' ';
              }
            }
          });

          // Update word on input (real-time updates)
          span.addEventListener('input', (e) => {
            const wordId = e.target.dataset.wordId;
            const pageWords = wordsByPage[word.pageIndex];
            const wordObj = pageWords.find(w => w.id === wordId);
            if (wordObj) {
              wordObj.text = e.target.textContent.trim() || ' ';
            }
          });

          wordLayer.appendChild(span);
        });

      canvasWrapper.appendChild(canvas);
      canvasWrapper.appendChild(wordLayer);
      
      // Add page number label
      const pageLabel = document.createElement('div');
      pageLabel.className = 'text-sm text-muted-light dark:text-muted-dark mb-2 text-center';
      pageLabel.textContent = `Page ${pageNum}`;
      
      pageContainer.appendChild(pageLabel);
      pageContainer.appendChild(canvasWrapper);

      document.getElementById('pagesContainer').appendChild(pageContainer);
    }

    function extractWords(textItems, pageIndex, viewport) {
      const words = [];
      let wordId = 0;

      textItems.forEach((item, index) => {
        // Transform matrix: [a, b, c, d, e, f]
        // a, d = scale (fontSize)
        // e, f = translation (x, y)
        const transform = item.transform;
        const fontSize = Math.abs(transform[0]) || Math.abs(item.height) || 12;
        const x = transform[4];
        const y = viewport.height - transform[5]; // Flip Y coordinate (PDF origin is bottom-left, canvas is top-left)
        
        // Split by spaces to get individual words
        const textParts = item.str.split(/\s+/);
        const spaces = item.str.split(/\S+/).filter(s => s.length > 0);
        const charWidth = item.width / item.str.length;
        
        let currentX = x;
        
        textParts.forEach((part, partIndex) => {
          if (!part.trim()) return;
          
          // Calculate word width based on character count
          const width = charWidth * part.length;
          const height = fontSize;

          const word = new Word(
            `word-${pageIndex}-${wordId++}`,
            pageIndex,
            part,
            currentX,
            y - height, // Adjust Y to align with text baseline
            fontSize,
            width,
            height
          );

          words.push(word);
          
          // Advance position: word width + space width
          currentX += width;
          if (partIndex < spaces.length && spaces[partIndex]) {
            currentX += charWidth * spaces[partIndex].length;
          }
        });
      });

      return words;
    }

    // Download edited PDF
    document.getElementById('downloadBtn').addEventListener('click', async () => {
      if (!originalPdfBytes || !wordsByPage.length) {
        alert('Please upload a PDF first.');
        return;
      }

      try {
        const downloadBtn = document.getElementById('downloadBtn');
        downloadBtn.disabled = true;
        downloadBtn.textContent = 'Generating PDF...';

        // Load PDF with pdf-lib
        const { PDFDocument, rgb } = PDFLib;
        const pdfDoc = await PDFDocument.load(originalPdfBytes);

        // Remove all existing pages
        const pageCount = pdfDoc.getPageCount();
        for (let i = pageCount - 1; i >= 0; i--) {
          pdfDoc.removePage(i);
        }

        // For each page in our edited version
        for (let pageIndex = 0; pageIndex < pagesInfo.length; pageIndex++) {
          const pageInfo = pagesInfo[pageIndex];
          const page = pdfDoc.addPage([pageInfo.width, pageInfo.height]);
          const words = wordsByPage[pageIndex];

          // Draw all words at their positions
          words.forEach(word => {
            if (!word.text || word.text.trim() === '') return;
            
            // Convert canvas coordinates to PDF coordinates (Y is flipped)
            // Canvas: top-left origin, PDF: bottom-left origin
            const pdfY = pageInfo.height - word.y - word.fontSize;

            try {
              page.drawText(word.text, {
                x: word.x,
                y: pdfY,
                size: word.fontSize,
                color: rgb(0, 0, 0),
              });
            } catch (error) {
              console.warn(`Error drawing word "${word.text}":`, error);
            }
          });
        }

        // Save PDF
        const pdfBytes = await pdfDoc.save();

        // Trigger download
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'edited.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        downloadBtn.disabled = false;
        downloadBtn.textContent = 'Download Edited PDF';
      } catch (error) {
        console.error('Error generating PDF:', error);
        alert('Error generating PDF. Please try again.');
        document.getElementById('downloadBtn').disabled = false;
        document.getElementById('downloadBtn').textContent = 'Download Edited PDF';
      }
    });
  </script>
  <script src="../tools-shared-script.js"></script>
</body>
</html>

